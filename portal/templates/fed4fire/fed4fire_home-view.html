{% extends "layout_base.html" %}
{% load portal_filters %}

{% block content %}
<!-- <div class="row">
{% widget '_widget-news.html' %}
</div> -->
{% if username %}
<div class="container dashboard">
	<div class="row">
		<div class="col-md-3">
			<h3>
				EXPERIMENT
			</h3>
			<div>
				<a href="#"><img src="{{ STATIC_URL }}img/icon_slices.png" alt="" /></a>
			</div>
			<div>
				<button id="slicerequestbtn" type="button" class="btn btn-default"><span class="glyphicon glyphicon-plus"></span> Request slice</button>
			</div>
			<div>	
				<div id="home-slice-list"><img src="{{ STATIC_URL }}img/loading.gif" alt="Loading Slices" /></div>
			</div>
			 <div>
     			<button id="jfed" type="button" class="btn btn-default" title="Some tools do their own slice creation and management.">
				<span class="glyphicon glyphicon-globe"></span>Experiment now</button>
			 </div>
			<div>
				<ul><li>
					<a class="button2" href='http://jfed.iminds.be/releases/r1306/webstart/experimenter/jfed-experimenter.jnlp' 
					onclick="return  launchApplication('http://jfed.iminds.be/releases/r1306/webstart/experimenter/jfed-experimenter.jnlp');">jFed</a>
				</li></ul>
			</div>
		</div>
		<div class="col-md-3">
			<h3>MANAGEMENT</h3>
			<div>
				<a href="/portal/institution"><img src="{{ STATIC_URL }}img/icon_authority_color.png" alt="" /></a>
			</div>
			<div>
				<button id="validaterequestbtn" type="button" class="btn btn-default"><span class="glyphicon glyphicon-ok"></span> Validate Requests</button>
			</div>
		</div>
		<div class="col-md-3">
			<h3>
				SUPPORT
			</h3>
			<div>
				<a href="http://doc.fed4fire.eu/support.html" target="_blank"><img src="{{ STATIC_URL }}img/icon_support.png" alt="" /></a>
			</div>
			<div>
				<button id="ticketbtn" type="button" class="btn btn-default"><span class="glyphicon glyphicon-envelope"></span> Contact</button>
			</div>
		</div>
		
		<div class="col-md-3">
			<h3>
				ACCOUNT
			</h3>
			<div>
				<a href="/portal/account/"><img src="{{ STATIC_URL }}img/icon_user_color.png" alt="" /></a>
			</div>
			<div>
				<button id="logoutbtn" type="button" class="btn btn-default" data-username="{{ username }}"><span class="glyphicon glyphicon-off"></span> Logout</button>
			</div>
			<div>
				{% if person.last_name %}
					{{person.first_name}} {{person.last_name}}<br />
				{% endif %}
    			<span class="label">Email:</span> <a href='/portal/account/'>{{person.email}}</a>
	    	</div>
		</div>
	</div>
</div>
{% else %}
<div class="container-fluid home">
	<div class="">
		<div class="col-sm-2"></div>
		<div class="col-sm-4 slogan">
			<h2>
				Your Easy Access to Computer Networking Testbeds.
			</h2>
			<h3>
				A wide variety of world class testbeds available through your one account.
			</h3>
		</div>
		<div class="col-sm-4 col-sm-offset-1" style="width:400px; top:16px; float:left;">
   			<div class="row">
				{% widget '_widget-login-user.html' %}
			</div>
		</div>
		<div class="col-sm-1"></div>
	</div>
</div>
{% endif %}


<script type="text/javascript">
	$(document).ready(function() {
		$('a.home-tab').click(function() {
			$('ul.nav-tabs li').removeClass('active');
			$(this).parent().addClass('active');
			$('div.home-panel').hide();
			$('div#'+$(this).data('panel')).show();
		});
		$('button#validaterequestbtn').click(function() {
			window.location="/portal/validate/";
		});
		$('button#ticketbtn').click(function() {
			window.location="/portal/contact/";
		});
		$('button#signupbtn').click(function() {
			window.location="/portal/register/";
		});
		$('button#slicerequestbtn').click(function() {
			window.location="/portal/slice_request/";
		});
/*-------
List of slices has been moved in 
portal/templates/base.html
This should go into session
--------*/
});
</script>

<script>
	function launchApplication(jnlpfile) {
     	dtjava.launch(
        	{ url : jnlpfile },
            {
            	javafx : '2.2+',
                toolkit: 'swing'
            	},
                {}
        );
        return false;
     }
</script>
{% endblock %}
